<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="matchingReport">

	<!-- / 회원아이디로 전체매칭내역을 불러온다 -->
	<select id="getMatchingList" resultType="MatchingVo" parameterType="String">

		select * from matching
		where mem_id = #{mem_id}

	</select>


	<!-- // 매칭아이디로 한개의 매칭매역을 불러온다 -->
	<select id="getMatching" resultType="MatchingVo" parameterType="String">

		select * from matching
		where
		mat_id = #{mat_id}
	</select>




	<!-- // 매칭아이디로 해당 매칭아이디의 전체 보고서 목록을 불러온다 -->
	<select id="getReportList" resultType="ReportVo" parameterType="String">

		select * from report
		mat_id = #{mat_id}

	</select>




	<!-- // 리포트 아이디로 해당 보고서를 불러온다 -->
	<select id="getReport" resultType="ReportVo" parameterType="String">

		select * from report
		where rep_id = #{rep_id}
	</select>




    <!--     // 해당 회원의 모든 보고서를 가져온다  -->

<!-- 	<select id="getAllReportList" resultType="matchingReportVo" parameterType="String"> -->

<!-- 	SELECT * FROM REPORT WHERE MAT_ID IN -->
<!-- 	(SELECT MAT_ID FROM MATCHING WHERE MEM_ID LIKE #{MEM_ID}) -->
	
<!-- 	</select> -->

    
    
    	<select id="getAllReportList" resultType="matchingReportVo" parameterType="String">

	SELECT  M.MAT_ID, M.MAT_TITLE,M.MAT_CONT,M.MAT_CONT, M.MAT_END,M.MAT_BC,M.MAT_TC,M.MAT_ALLDAY,M.MAT_TYPE,M.MEM_ID,M.CW_MEM_ID, R.REP_ID ,R.REP_TIME
,R.REP_TITLE,R.REP_CONT
FROM REPORT R , MATCHING M  
WHERE R.MAT_ID(+) =M.MAT_ID
AND M.MEM_ID = #{MEM_ID}
	
	</select>
    
    
 <!--     //해당회원의 모든 보고서중 특정 보고서 아이디의 내용을 가져온다  -->
<!--     <select id="getCertainReport" resultType="matchingReportAVo" parameterType="matchingReportVo"> -->
<!-- 	SELECT  M.MAT_ID, M.MAT_TITLE,M.MAT_CONT,M.MAT_ST, M.MAT_END,M.MAT_BC,M.MAT_TC,M.MAT_ALLDAY,M.MAT_TYPE,M.MEM_ID,M.CW_MEM_ID, R.REP_ID ,R.REP_TIME -->
<!-- ,R.REP_TITLE,R.REP_CONT -->
<!-- FROM REPORT R , MATCHING M   -->
<!-- WHERE R.MAT_ID(+) =M.MAT_ID -->
<!-- AND M.MEM_ID = #{MEM_ID} AND REP_ID=#{REP_ID} -->
	
<!-- 	</select> -->




<!--     //해당회원의 모든 보고서중 특정 보고서 아이디의 내용과 첨부파일을 가져온다  -->
    <select id="getCertainReport" resultType="MatchingReportAttachmentVo" parameterType="MatchingReportAttachmentVo">
    
    	SELECT  M.MAT_ID, M.MAT_TITLE,M.MAT_CONT,M.MAT_ST, M.MAT_END,M.MAT_BC,M.MAT_TC,M.MAT_ALLDAY,M.MAT_TYPE,M.MEM_ID,M.CW_MEM_ID, R.REP_ID ,R.REP_TIME
,R.REP_TITLE,R.REP_CONT,A.REP_ATT_ID,A.REP_ATT_PATH,A.REP_ATT_NM
FROM REPORT R , MATCHING M   ,REPORTATTACH A
WHERE R.MAT_ID(+) = M.MAT_ID 
AND M.MEM_ID = #{MEM_ID} AND R.REP_ID=#{REP_ID} AND A.REP_ID=#{REP_ID}
	
    
	
	</select>





</mapper>